# Trial Reset

<p align="center">
  <img src="assets/icon.ico" alt="Trial Reset" width="128" height="128">
</p>

<p align="center">
  <b>Windows 软件试用期自动重置工具</b>
</p>

<p align="center">
  <a href="#功能特性">功能特性</a> •
  <a href="#支持的软件">支持的软件</a> •
  <a href="#安装">安装</a> •
  <a href="#使用方法">使用方法</a> •
  <a href="#从源码构建">构建</a> •
  <a href="#常见问题">FAQ</a>
</p>

---

## 功能特性

- 🔄 **定时自动重置** — 可配置的重置周期
- 💾 **保留用户设置** — 插件、主题、快捷键、最近项目等
- 🖥️ **系统托盘运行** — 静默后台运行，不打扰工作
- 🔔 **智能提醒** — 重置前弹窗确认，可选择推迟
- ⏱️ **倒计时显示** — 托盘菜单显示距下次重置的时间
- 🚀 **开机自启** — 自动添加到 Windows 启动项
- 🔪 **自动关闭进程** — 重置前自动关闭运行中的程序
- ⏰ **推迟选项** — 可推迟 1 小时后再重置
- 📦 **单文件运行** — 无需安装，双击即用

## 支持的软件

### 工具 A — IDE 开发工具（25天重置）

支持主流 IDE 开发环境，包括 Python、Web、Java、C++、C#、Go、PHP、Ruby 等语言的 IDE。

### 工具 B — 数据库管理工具（10天重置）

支持主流数据库管理客户端。

## 安装

### 方式一：下载发行版（推荐）

1. 前往 [Releases](../../releases)
2. 下载 `TrialReset.exe`
3. 双击运行即可！

程序会自动：
- 添加到 Windows 启动项
- 显示在系统托盘
- 按设定周期自动重置

### 方式二：从源码构建

参见下方 [从源码构建](#从源码构建) 章节。

## 使用方法

### 托盘菜单（右键点击托盘图标）

```
┌──────────────────────────┐
│ ── 工具 A ──             │
│ 下次重置: 23天 5小时      │
│ 重置 工具 A              │
│ ── 工具 B ──             │
│ 下次重置: 8天 12小时      │
│ 重置 工具 B              │
│ ─────────────────────    │
│ 开机自启 [开]            │
│ ─────────────────────    │
│ 退出                     │
└──────────────────────────┘
```

| 选项 | 说明 |
|------|------|
| **下次重置: Xd Xh** | 距离下次自动重置的时间 |
| **重置 工具 A** | 手动触发 IDE 工具重置 |
| **重置 工具 B** | 手动触发数据库工具重置 |
| **开机自启 [开/关]** | 切换 Windows 启动项 |
| **退出** | 关闭程序 |

### 托盘提示

鼠标悬停在托盘图标上，可查看两个工具的倒计时。

## 从源码构建

### 环境要求

- Python 3.8+
- Windows 10/11

### 项目结构

```
trial-reset/
├── main.py              # 主程序（系统托盘应用）
├── jetbrains_reset.py   # 工具 A 重置模块
├── navicat_reset.py     # 工具 B 重置模块
├── build.bat            # 打包脚本
├── requirements.txt     # 依赖
└── assets/icon.ico      # 图标
```

### 构建步骤

```bash
# 克隆仓库
git clone https://github.com/YOUR_USERNAME/trial-reset.git
cd trial-reset

# 安装依赖
pip install -r requirements.txt

# 打包为可执行文件
pyinstaller --onefile --windowed --name="TrialReset" --icon=assets/icon.ico --add-data "assets;assets" --clean --noconfirm main.py

# 可执行文件位于 dist/TrialReset.exe
```

或直接运行：
```bash
build.bat
```

## 工作原理

### 工具 A（IDE 开发工具）

**删除的内容：**
- 设备标识符和用户标识符
- 本地缓存目录
- 相关注册表项
- 配置文件中的试用相关条目

**保留的内容：**
- IDE 设置、代码格式化规则
- 键盘快捷键、已安装的插件
- 最近项目、配色方案
- 文件模板、数据库驱动
- 更多用户自定义配置...

### 工具 B（数据库管理工具）

**删除的内容：**
- 更新检查相关注册表项
- 注册信息相关注册表项
- CLSID 中的特定条目

### 数据位置

配置文件和备份位于：
```
%LOCALAPPDATA%\TrialResetApp\
├── config.json              # 配置文件
└── backup/                  # 设置备份
```

## 配置

配置文件 `config.json` 示例：

```json
{
  "tool_a": {
    "last_reset": "2025-01-24T12:00:00",
    "next_reset": "2025-02-18T12:00:00"
  },
  "tool_b": {
    "last_reset": "2025-01-28T12:00:00",
    "next_reset": "2025-02-07T12:00:00"
  },
  "autostart_configured": true
}
```

重置间隔可在源码中调整。

## 常见问题

### 这个工具安全吗？

安全。工具只删除试用相关的文件和注册表项，保留所有用户设置。IDE 工具的设置在重置前会自动备份。

### 会丢失我的设置吗？

不会。所有设置、插件、最近项目等都会被备份并恢复。

### 重置无效怎么办？

确保重置前所有相关程序已完全关闭。可在任务管理器中检查是否有残留进程。

### 如何卸载？

1. 右键托盘图标 → 退出
2. 删除可执行文件
3. （可选）移除启动项：`Win+R` → `shell:startup` → 删除快捷方式
4. （可选）删除配置：`%LOCALAPPDATA%\TrialResetApp`

## 免责声明

本工具仅供学习和研究目的。请支持正版软件。

## 许可证

MIT License — 详见 [LICENSE](LICENSE) 文件。

## 贡献

欢迎贡献代码！您可以：

- 🐛 报告 Bug
- 💡 提出新功能建议
- 🔧 提交 Pull Request

## Star

如果这个工具对你有帮助，欢迎点个 ⭐！
